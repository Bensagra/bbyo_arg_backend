// schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"      // o “mysql” / “sqlite”
  url      = env("DATABASE_URL")
}

enum Status {
  NO_ACTIVITY   // 0 → gris
  LACKING       // 1 → rojo
  FULL          // 2 → verde
}

/// Día de planificación con su estado
model Activity {
  id         Int                   @id @default(autoincrement())
  date       DateTime              @unique
  status     Status                @default(NO_ACTIVITY)
  createdAt  DateTime              @default(now())
  updatedAt  DateTime              @updatedAt

  // relaciones many-to-many con propuestas
  proposals  ActivityProposal[]
}

/// Propuesta anónima de actividad (banco de ideas)
model Proposal {
  id         Int                   @id @default(autoincrement())
  content    String
  createdAt  DateTime              @default(now())

  // relaciones many-to-many con planificaciones
  activities ActivityProposal[]
}

/// Tabla de unión para asociar propuestas a una planificación
model ActivityProposal {
  activity   Activity   @relation(fields: [activityId], references: [id])
  activityId Int

  proposal   Proposal   @relation(fields: [proposalId], references: [id])
  proposalId Int

  @@id([activityId, proposalId])
}